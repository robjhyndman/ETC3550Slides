%% This is the Monash beamer theme
%% Created for Monash Business School
%% Updated by Rob J Hyndman. 16 April 2023

\RequirePackage{beamerthememetropolis}
% Alter the color theme by setting eg 'colortheme: monashblue' in the YAML header

% Fonts
\usepackage[scale=0.85]{sourcecodepro}
\usepackage[lf]{FiraSans}
%\IfFileExists{carlito.sty}{\usepackage[lf,t]{carlito}}{\usepackage{bera}}

%% Default color theme
\usecolortheme{monashwhite}
\def\shadecolor{\relax}

% No section pages
\metroset{sectionpage=none,subsectionpage=none}

% Lets make descriptions and alerts bold
\setbeamerfont{description item}{series=\bfseries}
\setbeamerfont{alerted text}{series=\bfseries}

% Footer progress bar
\metroset{progressbar=foot}

% Rounded corners on boxes
\useinnertheme{rounded}

% Square bullets and enumerated items
\setbeamertemplate{items}[square]

% larger squares for enumeration
\defbeamertemplate{enumerate item}{mysquare}
{ \raisebox{-0.ex}{\hbox{%
    \usebeamerfont*{item projected}%
    \usebeamercolor{enumerate item}%
    \vrule width4ex height2.7ex depth.7ex%
    \hskip-4ex%
    \hbox to4ex{%
      \hfil%
      \color{LightGrey}\raisebox{.2ex}{\insertenumlabel}%
      \hfil}%
  }}%
}
[action]
{\setbeamerfont{item projected}{size=\scriptsize}}
\setbeamertemplate{enumerate item}[mysquare]
\setbeamertemplate{itemize item}[square]
\setbeamertemplate{items}[mysquare]

% Triangle and stars for nested itemize lists
\usesubitemizeitemtemplate{%
    \tiny\raise1.5pt\hbox{\color{beamerstructure}$\blacktriangleright$}%
}
\usesubsubitemizeitemtemplate{%
    \tiny\raise1.5pt\hbox{\color{beamerstructure}$\bigstar$}%
}

% Absolute figure placement
\RequirePackage[absolute,overlay]{textpos}
\setlength{\TPHorizModule}{1cm}
\setlength{\TPVertModule}{1cm}
\def\placefig#1#2#3#4{\begin{textblock}{.1}(#1,#2)\rlap{\includegraphics[#3]{#4}}\end{textblock}}
\def\full#1{\vspace*{0.05cm}\centerline{\includegraphics[width=15cm,height=7.5cm,keepaspectratio=true]{#1}}}

% Monash title page
% One can alter the font size by setting eg 'titlefontsize: 20pt' in the YAML header
\setbeamerfont{title}{series=\bfseries,parent=structure,size=\fontsize{22}{28}}
\setbeamertemplate{title page}
{\placefig{-0.01}{-0.01}{width=1.01\paperwidth,height=1.01\paperheight}{title16x9}
\begin{textblock}{9.5}(1,2.8)\usebeamerfont{title}
{\color{Orange}\raggedright\par\inserttitle}
\end{textblock}
\begin{textblock}{9.5}(1,7)
{\color{Orange}\raggedright{\insertauthor}\mbox{}\\[0.2cm]
\insertinstitute}
\end{textblock}}

% Outline at start of each section
\AtBeginSection[]{
   \begin{frame}{Outline}\vspace{0.4cm}
   \tableofcontents[currentsection]
   \end{frame}
  }
% Tighter table of contents
\usepackage{etoolbox}
\pretocmd{\section}{\addtocontents{toc}{\protect\addvspace{-20\p@}}}{}{}
\setbeamertemplate{section in toc}[square]
\setbeamerfont{section number projected}{size=\large}
\setbeamertemplate{section in toc shaded}[default][50]
